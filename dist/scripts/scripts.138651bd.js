"use strict";angular.module("wallethubApp",["ngAnimate","ngCookies","ngResource","ngSanitize","ngTouch","ui.router"]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("home",{url:"/",templateUrl:"views/main.html",controller:"MainCtrl"}).state("list",{url:"/list",templateUrl:"views/list.html",controller:"ListCtrl"}).state("person",{url:"/person",templateUrl:"views/person.html",controller:"PersonCtrl"}).state("list.item",{url:"/:item",templateUrl:"views/item.html",controller:"ItemCtrl"}),b.otherwise("/")}]).service("shareData",function(){var a=this;a.cont=0,a.selectedPersona={},a.allData=null}).directive("formatPhone",[function(){return{restrict:"A",link:function(a,b,c,d,e){b.on("keyup",function(){var a=b.val();a=a.replace(/\D/g,""),a=a.substring(0,10);var c=a.length;a=0==c?a:c<4?"("+a:c<7?"("+a.substring(0,3)+")"+a.substring(3,6):"("+a.substring(0,3)+")"+a.substring(3,6)+"-"+a.substring(6,10),b.val(a)})}}}]).directive("formatCurrency",[function(){return{restrict:"A",link:function(a,b,c,d,e){b.on("keyup",function(){var a=b.val();a=a.replace(/\D/g,""),a=a.replace(/,/g,""),a=a.replace(/\./g,""),a=a.replace(/$/g,""),"0"===a[0]&&("0"===a[1]&&a.slice(1,c),a=a.slice(1,c));var c=a.length;if(1===c)a="$0,0"+a;else if(c<=2)a="$0,"+a;else{for(var d=6,e=0,f=[],g=c-1;g>=0;g--)++e>=d?(d=3,e=0,f.unshift("."),f.unshift(a[g])):f.unshift(a[g]);f=f.join(""),f="$"+f.substr(0,f.length-2)+","+f.substr(f.length-2,f.length),a=f}b.val(a)})}}}]),angular.module("wallethubApp").controller("MainCtrl",["shareData",function(a){}]),angular.module("wallethubApp").controller("ItemCtrl",["$scope","$stateParams","shareData","$location",function(a,b,c,d){return c.allData?(a.item=c.allData[parseInt(b.item)-1],void(a.clickInfo=function(){c.selectedPersona=c.allData[parseInt(b.item)-1],d.path("/person")})):void d.path("/list")}]),angular.module("wallethubApp").controller("ListCtrl",["$scope","shareData","$http","$location",function(a,b,c,d){function e(b){a.shareData.allData=null,a.shareData.allData=[];for(var c in b)a.shareData.allData.push({name:b[c].name,pos:parseInt(c)+1,data:b[c]})}function f(){c.get("data/data.json").then(function(a){e(a.data)},function(b){a.showError=!0})}a.shareData=b,a.showError=!1,a.by="",a.shareData.allData||f(),a.gotoItem=function(c){b.selectedPersona=a.shareData.allData[c],d.path("/list/"+c)},a.clickAlign=function(b){a.by=b,"name"===b?(angular.element("#orderByName").addClass("disabled"),angular.element("#orderByPos").removeClass("disabled")):(angular.element("#orderByPos").addClass("disabled"),angular.element("#orderByName").removeClass("disabled"))},a.clickAlign("name")}]),angular.module("wallethubApp").controller("PersonCtrl",["$scope","$stateParams","shareData","$location",function(a,b,c,d){return c.allData?(a.person=c.selectedPersona,a.yourRate=0,a.total=a.person.data.rate1+a.person.data.rate2+a.yourRate,a.phonenumber=null,a.salary=null,a.backClick=function(){d.path("/list")},a.code1="",a.code2="",a.code3="",a.maxLen=5,a.validInputRate=function(){a.yourRate<0&&(a.yourRate=10),a.yourRate>10&&(a.yourRate=0),a.total=a.person.data.rate1+a.person.data.rate2+a.yourRate},a.validInputTotal=function(){a.total>a.person.data.rate1+a.person.data.rate2+10&&(a.total=a.person.data.rate1+a.person.data.rate2),a.total<a.person.data.rate1+a.person.data.rate2&&(a.total=a.person.data.rate1+a.person.data.rate2),a.yourRate=a.total-(a.person.data.rate1+a.person.data.rate2)},void(a.changingInput=function(b){if(a[b].length>=a.maxLen){var c="code1"===b?"#code2":"#code3";"code3"!==b&&angular.element(c).focus()}if(0===a[b].length){var c="code3"===b?"#code2":"#code1";"code1"!==b&&angular.element(c).focus()}})):void d.path("/list")}]),angular.module("wallethubApp").run(["$templateCache",function(a){a.put("views/item.html",'<div class="jumbotron"> <h2>{{item.name}}</h2> <p>Email : {{item.data.email}}</p> <p>Phone: {{item.data.phone}}</p> <button type="button" class="btn btn-default info" ng-click="clickInfo()">Rate this person</button> </div>'),a.put("views/list.html",'<div ui-view class="jumbotrom"></div> <div class="panel panel-default"> <div class="panel-heading"> <h4>Persona Selection</h4> <div class="btn-group" role="group" aria-label="..."> <button type="button" class="btn btn-default" ng-click="clickAlign(\'name\')" id="orderByName">Name</button> <button type="button" class="btn btn-default" ng-click="clickAlign(\'pos\')" id="orderByPos">Position</button> </div> <label class="pull-right"> <span class="glyphicon glyphicon-search"></span> <input ng-model="searchText"> </label> </div> <div class="panel-body"> <div class="list-group"> <button type="button" ng-repeat="d in shareData.allData | orderBy:by | filter:searchText" class="list-group-item" ng-click="gotoItem(d.pos)"> <span class="badge">{{(d.pos)}}</span> <label>{{d.name}}</label> </button> </div> </div> </div>'),a.put("views/main.html",'<div class="jumbotron"> <h1>\'Hello Wallethub!</h1> <h3> This is the Everton Melo\'s test. </h3> <p>I hope you analize it with a lot of love <span class="glyphicon glyphicon-heart"></span></p> <p><a class="btn btn-lg btn-success" ng-href="#/list">Start!<span class="glyphicon glyphicon-ok"></span></a></p> </div> <div class="row marketing"> <h4>About Test</h4> <p> You can check all test requirements clicking in <a href="#/list">Persona selection</a>. As a good boss there you will be able to give your opnion about the note and deserve salary of a employee . After you can fill your phone number and a suposed barcode where you can use any characters. </p> <h4>Tools</h4> <p>In this test I have used Yeoman to scaffolding the project. All dependencies are in Bower and you can run this project with Grunt.</p> <h4>The only thing that missing.</h4> <p> As I didn\'t use any accets I have not used require.js and I hope that it won\'t be a bad thing in my test application. </p> </div>'),a.put("views/person.html",'<div class="container"> <button type="button" class="btn btn-default pull-left info" ng-click="backClick()"><i class="glyphicon glyphicon-chevron-left"></i></button> <div class="jumbotron"> <h2>{{person.name}}</h2> <p>Email : {{person.data.email}}</p> <p>Phone: {{person.data.phone}}</p> </div> <div class="panel panel-default"> <div class="panel-heading"> <h4>Notes</h4> </div> <div class="panel-body"> <table class="table table-bordered"> <thead> <tr> <th>your rate</th> <th>rate 1</th> <th>rate 2</th> <th>Total</th> </tr> </thead> <tbody> <tr> <td><input type="number" ng-model="yourRate" ng-change="validInputRate()" class="codeInput"></td> <td><label>{{person.data.rate1}}</label></td> <td><label>{{person.data.rate2}}</label></td> <td><input type="number" ng-model="total" ng-change="validInputTotal()" class="codeInput"></td> </tr> </tbody> </table> <table class="table table-bordered"> <tbody> <tr> <th><label>deserved salary</label></th> <th><input type="text" ng-model="salary" format-currency placeholder="$$$" class="codeInput"></th> </tr> <tr> <th><label>Your phone: </label></th> <th><input type="text" ng-model="phonenumber" format-phone placeholder="(xxx)xxx-xxxx" class="codeInput"></th> </tr> </tbody> </table> <table class="table table-bordered"> <thead> <tr><label>supposed barcode</label></tr> </thead> <tbody> <tr> <th> <input type="text" maxlength="maxLen" placeholder="xxxxx" ng-change="changingInput(\'code1\')" ng-model="code1" id="code1" class="codeInput"> </th> <th> <input type="text" maxlength="maxLen" placeholder="xxxxx" ng-change="changingInput(\'code2\')" ng-model="code2" id="code2" class="codeInput"> </th> <th> <input type="text" maxlength="maxLen" placeholder="xxxxx" ng-change="changingInput(\'code3\')" ng-model="code3" id="code3" class="codeInput"> </th> </tr> </tbody> </table> </div> </div> </div>')}]);